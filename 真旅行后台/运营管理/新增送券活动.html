<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>B2C 真旅行后台 新增送券活动</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap.reset.css">
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap-datepicker.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/common.css">
    <link rel="stylesheet" type="text/css" href="../../css/maintain/common.css">
    <link rel="stylesheet" type="text/css" href="../../css/maintain/operatorManagement.css">

    <script type="text/javascript" src="../../js/base/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="../../js/bootdist/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../js/vendor/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript" src="../../js/vendor/bootstrap-datepicker.zh-CN.min.js"></script>
    <script type="text/javascript" src="../../js/maintain/common.js"></script>
    <script type="text/javascript" src="../../js/maintain/customValidator.js"></script>

    <!--[if lte IE 9]>
    <script type="text/javascript" src="../../js/base/html5.js"></script>
    <script type="text/javascript" src="../../js/base/respond.js"></script>
    <![endif]-->
        
</head>
<body>
    <div class="wrapper clearfix">
        <header class="main-header hoveringModel">
            <div class="stairMenuContent">
                <div class="wrap clearfix">
                    <div class="navLeft">
                        <a class="logo" href="/"></a>
                        <ul class="stairMenu">
                            <li class="editFonts">新增送券活动</li>
                        </ul>
                    </div>
                    <div class="headRightOperate">
                        <span class="userContent">Hi，千颂伊</span>
                        <label class="emailContent">
                            <i class="emailIcon"></i>
                            <span class="emailFonts">99</span>
                        </label>
                        <a href="javascript:void(0);" class="exitFonts">退出</a>
                    </div>
                </div>
            </div>
            <div class="headSecondLevel headBtn clearfix">
                <span class="leftBtn">
                    <a href="javascript:void(0);" class="returnBtn">< 返回</a>
                </span>
                <span class="rightBtn">
                    <button class="commonButton red-fe6869Button effect">活动生效</button>
                    <button class="commonButton orange-f79767Btn draft">保存草稿</button>
                    <button class="commonButton red-fe6869Button termination">强制终止</button>
                    <button class="commonButton orange-f79767Btn deliver">送券</button>
                </span>
            </div>
        </header>
        <div class="main-container changeMainContent">
            <section class="whiteBg">
                <table class="activityTable">
                    <colgroup>
                        <col width="90" />
                        <col width="875" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <th><em class="redStar">*</em>活动名称</th>
                            <td>
                                <input type="text" style="width:320px;"/>
                                <span style="padding-left: 300px;">当前活动状态</span>
                                <span class="activity-effect">已生效</span>
                                <!-- <span class="activity-termination">已终止</span>
                                <span class="activity-draft">草 稿</span> -->
                            </td>
                        </tr>
                        <tr>
                            <th class="verticalAlign">活动说明</th>
                            <td>
                                <textarea class="activity-description" placeholder="限500字以内"></textarea>
                            </td>
                        </tr>
                        <tr>
                            <th><em class="redStar">*</em>活动时间</th>
                            <td>
                                <input type="text" style="width: 130px;" class="datepicker startDate hasIcon"><em> 至 </em><input type="text" style="width: 130px;" class="datepicker endDate hasIcon">
                            </td>
                        </tr>
                        <tr>
                            <th class="verticalAlign"><em class="redStar">*</em>用户范围</th>
                            <td class="userRangeCont">
                                <div class="radioContent">
                                    <label class="radio active setUserBySelect">
                                        <span class="radioIcon"></span>
                                        <span class="labelFonts">按条件批量设置</span>
                                    </label>
                                    <label class="radio setUserByInput">
                                        <span class="radioIcon"></span>
                                        <span class="labelFonts">手动添加设置</span>
                                    </label>
                                </div>
                                <div class="selectUserBlock">
                                    <div class="radioContent">
                                        <label class="radio active">
                                            <span class="radioIcon"></span>
                                            <span class="labelFonts">现有用户</span>
                                        </label>
                                        <label class="radio">
                                            <span class="radioIcon"></span>
                                            <span class="labelFonts">活动期间新增用户</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="inputUserBlock" style="display: none;">
                                    <textarea class="inputUserTextarea" placeholder="输入用户登录名，用逗号隔开" readonly="readonly">名字,名字,名字</textarea>
                                    <span class="operInputUser edit">
                                        <button class="commonButton orange-f79767Btn editBtn">编辑</button>
                                    </span>
                                    <span class="operInputUser save" style="display: none;">
                                        <button class="commonButton red-fe6869Button saveBtn">保存</button>
                                        <button class="commonButton gray-bbbButton cancelBtn">取消</button>
                                    </span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>活动送券</th>
                            <td><button class="commonButton blue-45c8dcButton addVoucherBtn disabled" style="width:130px;"><i class="whiteAddIcon"></i>添加代金券</button></td>
                        </tr>
                    </tbody>
                </table>
                <table class="commonTab voucherInfoTable" style="display: none;">
                    <thead>
                        <tr>
                            <th>券码</th>
                            <th>券名</th>
                            <th>发放数量</th>
                            <th>发行量</th>
                            <th>发送情况</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="blueFontsNum">86598656</td>
                            <td class="blueFonts">满1000元减50元</td>
                            <td>
                                <input class="voucherPerNum" type="text" value="1" readonly="readonly" >张/人
                            </td>
                            <td>1000张</td>
                            <td>未发放</td>
                            <td>
                                <a class="greenFontsLink edit" href="javascript:;">编辑</a>
                                <a class="greenFontsLink save" href="javascript:;" style="display: none;">保存</a>
                                <a class="greenFontsLink delVoucher" href="javascript:;">删除</a>
                                <a class="greenFontsLink viewVoucherInfo" href="javascript:;">查看</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </div>
        <footer>Copyright © 2015 天地行 All Rights Reserved. 沪ICP备08101503号</footer>
    </div>

    <!--   活动生效弹窗   -->
    <div class="modal fade" data-backdrop="static" data-keyboard="false" id="effectWindow">
        <div class="modal-dialog" style="width:500px;height:215px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">操作提示</h4>
                </div>
                <div class="modal-body">
                    <div class="popupContainer">
                        <i class="warnIcon"></i>
                        <span class="popupContainer-fonts">活动生效后可激活代金券发放，已填写活动信息将不能更改，确定执行活动生效？</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="commonButton red-fe6869Button sureEffect">确认</button>
                    <button type="button" class="commonButton blue-45c8dcButton">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!--   强制终止弹窗   -->
    <div class="modal fade" data-backdrop="static" data-keyboard="false" id="terminationWindow">
        <div class="modal-dialog" style="width:500px;height:215px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">操作提示</h4>
                </div>
                <div class="modal-body">
                    <div class="popupContainer">
                        <i class="warnIcon"></i>
                        <span class="popupContainer-fonts">确认终止当前活动？</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="commonButton red-fe6869Button">确认</button>
                    <button type="button" class="commonButton blue-45c8dcButton">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!--   删除操作弹窗   -->
    <div class="modal fade" data-backdrop="static" data-keyboard="false" id="deleteWindow">
        <div class="modal-dialog" style="width:500px;height:215px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">操作提示</h4>
                </div>
                <div class="modal-body">
                    <div class="popupContainer">
                        <i class="warnIcon"></i>
                        <span class="popupContainer-fonts">要删除选中的代金券？</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="commonButton red-fe6869Button">确认</button>
                    <button type="button" class="commonButton blue-45c8dcButton">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!--   保存草稿弹窗   -->
    <div class="modal fade" data-backdrop="static" data-keyboard="false" id="draftWindow">
        <div class="modal-dialog" style="width:500px;height:215px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">操作提示</h4>
                </div>
                <div class="modal-body">
                    <div class="popupContainer">
                        <i class="passIcon"></i>
                        <span class="popupContainer-fonts">保存草稿成功！</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="commonButton red-fe6869Button">确认</button>
                </div>
            </div>
        </div>
    </div>

    <!--   送券操作弹窗   -->
    <div class="modal fade" data-backdrop="static" data-keyboard="false" id="deliverWindow">
        <div class="modal-dialog" style="width:500px;height:215px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">操作提示</h4>
                </div>
                <div class="modal-body">
                    <div class="popupContainer">
                        <i class="passIcon"></i>
                        <span class="popupContainer-fonts">成功发放代金券！</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="commonButton red-fe6869Button">确认</button>
                </div>
            </div>
        </div>
    </div>

    <!--   新增代金券模板 弹窗   -->
    <div class="modal fade" data-backdrop="static" data-keyboard="false" id="voucherWindow">
        <div class="modal-dialog" style="width:680px;height:480px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">新增代金券</h4>
                </div>
                <div class="modal-body">
                    <div class="popupContainer">
                        <table class="newVoucherTable">
                            <colgroup>
                                <col width="90">
                                <col width="">
                            </colgroup>
                            <tbody>
                                <tr>
                                    <th>券名</th>
                                    <td><input type="text" id="test" placeholder="10字以内" data-cv="required" style="width: 285px;"></td>
                                </tr>
                                <tr>
                                    <th>面额</th>
                                    <td>
                                        <input type="text" > 元
                                        <span class="grayFonts">10000元以内</span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>使用条件</th>
                                    <td>
                                        <input type="text" > 元
                                        <span class="grayFonts">满多少元可用</span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>有效期</th>
                                    <td>
                                        <input type="text" style="width: 130px;" data-cv="required" class="datepicker startDate hasIcon">
                                        <input type="text" style="width: 40px;"> 时
                                        <input type="text" style="width: 40px;"> 分
                                        <em style="margin-left:5px;"> 至 </em>
                                        <input type="text" style="width: 130px;" data-cv="required" class="datepicker endDate hasIcon">
                                        <input type="text" style="width: 40px;"> 时
                                        <input type="text" style="width: 40px;"> 分
                                    </td>
                                </tr>
                                <tr>
                                    <th>适用说明</th>
                                    <td><input type="text" placeholder="全场通用" style="width: 285px;"></td>
                                </tr>
                                <tr>
                                    <th class="verticalAlign">产品范围</th>
                                    <td>
                                        <div class="radioContent">
                                            <label class="radio active addAllProduct">
                                                <span class="radioIcon"></span>
                                                <span class="labelFonts">添加所有产品</span>
                                            </label>
                                            <label class="radio addInputProduct">
                                                <span class="radioIcon"></span>
                                                <span class="labelFonts">手动添加产品</span>
                                            </label>
                                        </div>
                                        <textarea class="productRange" placeholder="输入产品ID，以逗号隔开"></textarea>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="commonButton red-fe6869Button save">确认</button>
                    <button type="button" class="commonButton blue-45c8dcButton">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!--   查看代金券内容 弹窗   -->
    <div class="modal fade" data-backdrop="static" data-keyboard="false" id="voucherInfoWindow">
        <div class="modal-dialog" style="width:560px;height:350px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">查看代金券</h4>
                </div>
                <div class="modal-body">
                    <div class="popupContainer">
                        <table class="newVoucherTable">
                            <colgroup>
                                <col width="90">
                                <col width="">
                            </colgroup>
                            <tbody>
                                <tr>
                                    <th>券名：</th>
                                    <td>券名券名券名券名</td>
                                </tr>
                                <tr>
                                    <th>面额：</th>
                                    <td>100元</td>
                                </tr>
                                <tr>
                                    <th>使用条件：</th>
                                    <td>2000元</td>
                                </tr>
                                <tr>
                                    <th>有效期：</th>
                                    <td>2015-04-01 至 2015-05-31</td>
                                </tr>
                                <tr>
                                    <th>适用说明：</th>
                                    <td>全场通用</td>
                                </tr>
                                <tr>
                                    <th class="verticalAlign">产品范围：</th>
                                    <td>所有产品/0165461,16546513,9876514651,0165461,16546513,9876514651,0165461,16546513,9876514651</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>


<script type="text/javascript">
    $(function(){

        //  用户范围切换
        $(".setUserBySelect").click(function(){
            $(".selectUserBlock").show();
            $(".inputUserBlock").hide();
        });

        $(".setUserByInput").click(function(){
            $(".selectUserBlock").hide();
            $(".inputUserBlock").show();
        });


        // 编辑 手动输入用户名
        $(".inputUserBlock .editBtn").click(function(){
            $(".inputUserTextarea").removeAttr("readonly");
            $(".operInputUser.edit").hide();
            $(".operInputUser.save").show();
        });

        $(".inputUserBlock .saveBtn, .inputUserBlock .cancelBtn").click(function(){
            $(".inputUserTextarea").attr("readonly", "readonly");
            $(".operInputUser.save").hide();
            $(".operInputUser.edit").show();
        });

        //  编辑保存券发放数量  张/人
        $(".voucherInfoTable").on("click", ".edit", function(){
            $(".voucherPerNum").removeAttr("readonly");
            $(this).hide();
            $(".voucherInfoTable .save").show();
        });

        $(".voucherInfoTable").on("click", ".save", function(){
            $(".voucherPerNum").attr("readonly", "readonly");
            $(this).hide();
            $(".voucherInfoTable .edit").show();
        });

        //  弹窗提示
        $("button.effect").click(function(){
            $("#effectWindow").modal("show");
        });

        $("button.draft").click(function(){
            $("#draftWindow").modal("show");
        });

        $("button.termination").click(function(){
            $("#terminationWindow").modal("show");
        });

        $("button.deliver").click(function(){
            $("#deliverWindow").modal("show");
        });

        $("body").on("click", ".delVoucher", function(){
            $("#deleteWindow").modal("show");
        });

        //  添加代金券

        $("body").on("click", ".addVoucherBtn:not(.disabled)", function(){
            $("#voucherWindow").modal("show");
        });

        $("body").on("click", ".addAllProduct", function(){
            $(".productRange").hide();
        });

        $("body").on("click", ".addInputProduct", function(){
            $(".productRange").show();
        });

        //  确认生效操作, 内容变为不可编辑状态
        $("body").on("click", ".sureEffect", function(){

            //  文本输入框不可编辑
            $(".activityTable input[type='text'], .activityTable textarea").attr("readonly", "readonly");

            //  日期不可操作
            $(".activityTable").find("input.datepicker").attr("disabled", "disabled");

            //  显示用户范围
            if ($(".selectUserBlock").is(":visible")) {
                $(".userRangeCont").html($(".selectUserBlock label.active").find(".labelFonts").html());
            } else if ($(".inputUserBlock").is(":visible")) {
                $(".userRangeCont").html($(".inputUserTextarea"));
            }

            //  添加代金券操作
            $(".addVoucherBtn").removeClass("disabled");
            $(".voucherInfoTable").show();

            $("#effectWindow").modal("hide");
        });

        //  查看代金券内容
        $("body").on("click", ".viewVoucherInfo", function(){
            $("#voucherInfoWindow").modal("show");
        });

        $("#voucherWindow").modal("show");

        $(".save").click(function(){
            $("body").customValidate({
                validateAll: true
            });
        });

        
    });
</script>


</body>
</html>