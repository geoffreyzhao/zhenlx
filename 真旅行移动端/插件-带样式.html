<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="format-detection" content="telephone=no, email=no">
	<link rel="stylesheet" type="text/css" href="../../mstatic/css/jqm/jquery.mobile-1.4.5.min.css">
	<link rel="stylesheet" type="text/css" href="../../mstatic/css/jqm/jquery.mobile.theme-1.4.5.css">
	<link rel="stylesheet" type="text/css" href="../../mstatic/css/jqm.reset.css">
	<link rel="stylesheet" type="text/css" href="../../mstatic/css/common.css">
	<script type="text/javascript" src="../../mstatic/js/base/jquery.min.js"></script>
	<script type="text/javascript" src="../../mstatic/js/jqm/jquery.mobile-1.4.5.min.js"></script>
	<script type="text/javascript" src="../../mstatic/js/vendor/underscore.js"></script>
	<script type="text/javascript" src="../../mstatic/js/iscroll/iscroll.js"></script>
	<script type="text/javascript" src="../../mstatic/js/vendor/datepicker-scroll-update.js"></script>
	<script type="text/javascript" src="../../mstatic/js/vendor/cus-list-pop.js"></script>
	<script type="text/javascript" src="../../mstatic/js/base/fastclick.js"></script>
	<title>插件--带样式</title>

	<script type="text/javascript">
		var root = document.getElementsByTagName("html")[0],
			w = window.innerWidth >= 640 ? 640 : window.innerWidth;

		root.style.fontSize = (w / 320) * 20 + "px";
		root.style.minHeight = window.innerHeight + "px";
	</script>
</head>
<body>
	<div data-role="page">

		<div id="sexType">性别</div>

		<div id="cardType">证件类型</div>

		<div id="travellerInfo">动态加载（延时模拟）常旅客</div>
	</div>

<script type="text/javascript">

	$(function(){

		FastClick.attach(document.body);

		//  弹窗弹出，禁止页面滚动，待放入 common.js

		// $("div[data-role='popup']").popup({
  //           afteropen: function(){
  //               $(".ui-popup-screen").bind("touchmove", function(){  //  弹窗遮罩层禁止滑动
  //                   return false;
  //               });

  //               $(".pop-select-title").bind("touchmove", function(){
  //                   return false;
  //               });
  //           }
  //       });

        $("#sexType").click(function(){
        	$(this).cusListPop({
        		title: "请选择性别",
        		scrollId: "sexType",
        		data: ["男", "女"],
        		currentData: '女'
        	});
        });

        $("#cardType").click(function(){
        	$(this).cusListPop({
        		title: "请选择证件类型",
        		scrollId: "cardTypeWrapper",
        		data: [{
        			name: "身份证"
        		}, {
        			name: "护照"
        		}, {
        			name: "港澳通行证"
        		}, {
        			name: "士官证"
        		}, {
        			name: "其他"
        		}],
        		currentData: {
        			name: "士官证"
        		},
        		callback: function() {
        			//  可绑定弹窗上元素的事件操作
        		}
        	});
        });


        $("#travellerInfo").click(function(){

        	var $this = $(this);

        	//  用延时模拟发送请求回执的时间
        	//  实际情况是：在ajax success回调方法中调用cusListPop方法，数据参数传给data
        	setTimeout(function(){
        		$this.cusListPop({
        			title: "请选择常旅客",  //  默认值：请选择
					scrollId: "travellerInfoWrapper",  //  id 必填且唯一
					data: [{
						name: "常旅客1"
					}, {
						name: "常旅客2"
					}, {
						name: "常旅客3"
					}, {
						name: "常旅客4"
					}, {
						name: "常旅客5"
					},{
						name: "常旅客6"
					}, {
						name: "常旅客7"
					}, {
						name: "常旅客8"
					}, {
						name: "常旅客9"
					}, {
						name: "常旅客10"
					}]
        		});
        	}, 500);
        });
        
	});

</script>
</body>
</html>